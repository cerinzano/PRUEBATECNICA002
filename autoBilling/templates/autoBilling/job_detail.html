<!DOCTYPE html>
<html lang="es">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <title>Detalle del Job</title>
    <link rel="stylesheet" type="text/css" href="{% static 'autobilling/style.css' %}">
</head>
<body>
    <h1>Detalle del Job</h1>
    
    {% if error %}
        <p>{{ error }}</p>
    {% else %}
        <h2>Información General</h2>
        <table>
            <tr>
                <th>ID</th>
                <td>{{ job.id }}</td>
            </tr>
            <tr>
                <th>Job Number</th>
                <td>{{ job.job_number }}</td>
            </tr>
            <tr>
                <th>Client ID</th>
                <td>{{ job.client_id }}</td>
            </tr>
            <tr>
                <th>Start Time</th>
                <td>{{ job.start_time }}</td>
            </tr>
            <tr>
                <th>End Time</th>
                <td>{{ job.end_time }}</td>
            </tr>
            <tr>
                <th>Created At</th>
                <td>{{ job.created_at }}</td>
            </tr>
            <tr>
                <th>State</th>
                <td>{{ job.state }}</td>
            </tr>
            <tr>
                <th>Operational Model</th>
                <td>{{ job.operational_model }}</td>
            </tr>
        </table>
        
        <h2>Origen</h2>
        <table>
            <tr>
                <th>Nombre</th>
                <td>{{ job.origin.name }}</td>
            </tr>
            <tr>
                <th>Dirección</th>
                <td>{{ job.origin.address }}</td>
            </tr>
            <tr>
                <th>Descripción</th>
                <td>{{ job.origin.description }}</td>
            </tr>
            <tr>
                <th>Coordenadas</th>
                <td>{{ job.origin.coordinates.lat }}, {{ job.origin.coordinates.lng }}</td>
            </tr>
        </table>
        
        <h2>Destino</h2>
        <table>
            <tr>
                <th>Nombre</th>
                <td>{{ job.destination.name }}</td>
            </tr>
            <tr>
                <th>Dirección</th>
                <td>{{ job.destination.address }}</td>
            </tr>
            <tr>
                <th>Descripción</th>
                <td>{{ job.destination.description }}</td>
            </tr>
            <tr>
                <th>Coordenadas</th>
                <td>{{ job.destination.coordinates.lat }}, {{ job.destination.coordinates.lng }}</td>
            </tr>
        </table>
        
        <h2>Productos</h2>
        <table>
            <tr>
                <th>Nombre</th>
                <th>Cantidad</th>
                <th>Precio</th>
                <th>Foto</th>
            </tr>
            {% for item in job.items %}
            <tr>
                <td>{{ item.name }}</td>
                <td>{{ item.quantity }}</td>
                <td>{{ item.presentation.price.amount }} {{ item.presentation.price.currency_code }}</td>
                <td><img src="{{ item.photo_url }}" alt="{{ item.name }}" width="100"></td>
            </tr>
            {% endfor %}
        </table>
        
        <h2>Pago</h2>
        <table>
            <tr>
                <th>Método</th>
                <td>{{ job.collect_with.method }}</td>
            </tr>
            <tr>
                <th>Monto</th>
                <td>{{ job.collect_with.payment.amount }} {{ job.collect_with.payment.currency }}</td>
            </tr>
        </table>
        
        <h2>Destinatario</h2>
        <table>
            <tr>
                <th>Nombre</th>
                <td>{{ job.recipient.name }}</td>
            </tr>
            <tr>
                <th>Email</th>
                <td>{{ job.recipient.email }}</td>
            </tr>
            <tr>
                <th>Teléfono</th>
                <td>{{ job.recipient.phone_number }}</td>
            </tr>
        </table>
    {% endif %}
</body>
</html>